                   Power Client / Server Monitor

Overview
--------

The power monitoring system provides centralized logging of distributed
HPC node power usage.

Usage
-----

The system is made up of four components: server, client, control, and
analyze.  The four components can run either locally on the same host
or remotely based on command line configuration [-h].  Other configuration
options are the log level [-l], whether to log to file or console [-q],
and verbose mode [-v].

./server.pl [-p port] [-f filename] [-l loglevel] [-q]

./client.pl [-h hostname] [-r remoteport] [-p localport]
            [-f filename] [-l loglevel] [-s samplerate] [-q]

./control.pl [-h hostname] [-p port]
             [-s samplerate] [-u sensorport] [-d sensorport]
             [-c command] [-v value] [-t]

./analyze.pl [-f filename] [-l lowerbound] [-u upperbound]
             [-i identifier] [-n nodename] [-g gpfile] [-s] [-v]

command = { start | stop | freq }
value = { 1 - 8 | n }

Value can be 1 to 7 (sensor port), or 8 (all sensor ports) 

The voltage rail connections (sensor port) are:

J1  CPU 12V
J2  ATX-24 pin 12V 
J3  ATX-24 pin 5V (memory)
J4  ATX-24 pin 5Vsb
J5  ATX-24 pin 3.3V
J6  HDD 12V
J7  HDD 5V

The J2 and J5 rails power the PCI-Express Infiniband card.
Most of the logic chips on the motherboard are powered from the 3.3V rail.
Notable is the southbridge chip which probably consumes most of the power.

Output
------

The raw output file power.txt (default) from server.pl has the following
format:

     HOST:PID:SECONDS:MICROSECONDS:PORT:P1(A):P2(V):P3(mA):P4(mV):P5(mW):

The output files for each time / power value pair generated from analyze.pl
reside in the results directory and are denoted by HOST.PID_PORT_X
where X is either A, V, or W. 

A last output file is generated with summary information denoted summary.PID 
in the following format:

    HOST PORT A(avg) A(min) A(max) V(avg) V(min) V(max) W(avg) W(min) W(max) t(tot) t(min) t(max) P

Installation
------------

Be sure to replace the genRawPower8 dummy script with a symbollic link to the
most current version of genRawPower8.  The dummy script is only to be used for
testing offline.

The current implemenation assumes that there is a /tmp directory that is
writable.  All other mounts can be read only on the power module.
